    __CONFIG _CP_OFF & _WDT_OFF & _PWRTE_ON & _XT_OSC
    LIST P=16F84A
    INCLUDE <P16F84.INC>
    ORG 0
    
VARTIME	EQU 0X0C
CONT	EQU 0X0D
CONT2	EQU 0X0E
VARINT	EQU 0X0F
R	EQU 0X10
    
INICIO 
	    
	BSF	STATUS,RP0
	MOVLW	B'11111111'
	MOVWF   TRISB
	MOVLW	B'00000001'
	MOVWF	TRISA
	BCF	STATUS,RP0
	
PROGRAMA	
	MOVF	PORTB
	MOVWF	VARINT
	
	
	BTFSC	PORTB,0
	GOTO	T1
	BTFSC	PORTB,1
	GOTO	T2
	BTFSC	PORTB,2
	GOTO	T3
	BTFSC	PORTB,3
	GOTO	T4
	BTFSC	PORTB,4
	GOTO	T5
	BTFSC	PORTB,5
	GOTO	T6
	BTFSC	PORTB,6
	GOTO	T7
	BTFSC	PORTB,7
	GOTO	T8
	
T1
	MOVLW	D'1'
	MOVWF	VARTIME
	GOTO	FUNCPRIN	
T2
	MOVLW	D'3'
	MOVWF	VARTIME
	GOTO	FUNCPRIN	
T3
	MOVLW	D'5'
	MOVWF	VARTIME
	GOTO	FUNCPRIN
T4
	MOVLW	D'7'
	MOVWF	VARTIME
	GOTO	FUNCPRIN
T5
	MOVLW	D'9'
	MOVWF	VARTIME
	GOTO	FUNCPRIN
T6
	MOVLW	D'11'
	MOVWF	VARTIME
	GOTO	FUNCPRIN
T7
	MOVLW	D'13'
	MOVWF	VARTIME
	GOTO	FUNCPRIN
T8
	MOVLW	D'15'
	MOVWF	VARTIME
	
FUNCPRIN
	BTFSS	PORTA,0
	GOTO	FUNCPRIN
	MOVLW	B'00000100'
	MOVWF	TRISA
	CALL	TIME
	MOVLW	B'00000000'
	MOVWF	TRISA
	;SI VARINT ES IGUAL A PORT B VE A FUNCPRIN SI NO VE A PROGRAMA
	MOVF	PORTB,0
	SUBWF	VARINT,0
	BTFSC	STATUS,Z
	GOTO	FUNCPRIN
	GOTO	PROGRAMA
	
TIME
	
	MOVLW	D'173',0 ;TENEMOS UNA RUTINA DE TIEMPO DE DE 8.31 MICRO SEGUNDO CUANDO VARTIME ES 9
	MOVWF	CONT
TA
	MOVF	VARTIME,0
	MOVWF	CONT2
TC
	DECFSZ	CONT2
	GOTO	TC
	DECFSZ	CONT
	GOTO	TA
	RETURN
	
	END